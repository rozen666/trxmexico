<openerp>
    <data>
        <!-- VISTA TREE PARA CONTACTOS (RES_PARTNER) -->
         <record id="view_res_partner_contactos_tree_trxmexico" model="ir.ui.view">
            <field name="name">view.res.partner.contactos.tree.trxmexico</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="base.view_partner_tree"/>
            <field name="arch" type="xml">
                <data>
                </data>
            </field>
        </record>

        <!-- VISTA FORM PARA CONTACTOS (RES_PARTNER) -->
        <record id="view_res_partner_contactos_form_trxmexico" model="ir.ui.view">
            <field name="name">view.res.partner.contactos.form.trxmexico</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="base.view_partner_form"/>
            <field name="arch" type="xml">
                <data>
                    <xpath expr="/form/sheet/div[@name='buttons']" position="attributes">
                        <attribute name="invisible">1</attribute> 
                    </xpath>
                    <xpath expr="/form/sheet/div[@name='buttons']" position="after">                    
                        <div class="oe_right" name="fechas">
                             <group>
                                <group class="oe_subtotal_footer oe_right">
                                    <button type="object" name="attachment_doc_project" class="oe_stat_button" icon="fa-files-o">
                                        <div class="data-original-title title" widget="statinfo">Documentos</div>
                                    </button>
                                </group>
                            </group>
                        </div>
                    </xpath>
                    <xpath expr="//field[@name='is_company']" position="attributes">
                        <attribute name="invisible">1</attribute>
                    </xpath>
                    <xpath expr="//label[@for='is_company']" position="attributes">
                        <attribute name="invisible">1</attribute>
                    </xpath>
                    <xpath expr="//field[@name='title']" position="attributes">
                        <attribute name="invisible">1</attribute>
                    </xpath>
                    <xpath expr="//field[@name='fax']" position="attributes">
                        <attribute name="invisible">1</attribute>
                    </xpath>
                    <xpath expr="//field[@name='function']" position="attributes">
                        <attribute name="string">Empresa</attribute>
                        <attribute name="placeholder">Empresa</attribute>
                    </xpath>
                    <xpath expr="//notebook/page[3]" position="attributes">
                        <attribute name="invisible">1</attribute>
                    </xpath>
                    <xpath expr="/form/sheet/group/group[1]" position="attributes">
                        <attribute name="invisible">1</attribute>
                    </xpath>
                    <xpath expr="/form/sheet/group/group[2]/field[@name='function']" position="after">
                        <field name="clave_partner" readonly='True'/>
                    </xpath>
                    <xpath expr="/form/sheet/group/group[1]" position="after">
                        <field name="domicilio_partner"/>
                    </xpath>
                    <xpath expr="//field[@name='category_id']" position="attributes">
                        <attribute name="invisible">1</attribute>                      
                    </xpath>
                    <xpath expr="//field[@name='parent_id']" position="attributes">
                        <attribute name="invisible">1</attribute>                      
                    </xpath>
                    <xpath expr="//field[@name='parent_id']" position="before">
                       <div class="address_format">
                          <h1>
                            <field name="rfc_partner" placeholder="RFC" style="width: 90%"/>                     
                          <button name="button_validate_rfc" string="Verificar validez RFC" type="object" icon="gtk-execute" class="oe_inline" style="width: 50%"/>
                          </h1>                 
                        </div>
                    </xpath>
                    <xpath expr="/form[@string='Partners']/sheet" position="before">
                         <header>
                            <field name='status_partner' widget="statusbar" clickable="True"  statusbar_colors='{"NO_ACTIVO":"red","ACTIVO":"blue"}'/>  
                        </header>
                    </xpath>
                </data>
            </field>
        </record>
        
        <!-- VISTA KANBAM PARA CONTACTOS (RES_PARTNER) -->
        <record id="view_res_partner_contactos_kanban_trxmexico" model="ir.ui.view">
            <field name="name">iew.res.partner.contactos.kanban.trxmexico</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="base.res_partner_kanban_view"/>
            <field name="arch" type="xml">
                <data>
                </data>
            </field>
        </record>

        <!-- Actions y Relación de RES_PARTNER  -->
        <record model="ir.actions.act_window" id="actions_view_trxmexico">
            <field name="name">Clientes</field>
            <field name="res_model">res.partner</field>
            <field name="view_type">form</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="domain">[('is_company','!=',True),('customer','=',True)]</field>        
        </record>

        <record model="ir.actions.act_window.view" id="actions_view_trxmexico_tree">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_res_partner_contactos_tree_trxmexico"/>
            <field name="act_window_id" ref="actions_view_trxmexico"/>
            <field name="domain">[]</field>

        </record>

        <record model="ir.actions.act_window.view" id="actions_view_trxmexico_form">
            <field eval="3" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_res_partner_contactos_form_trxmexico"/>
            <field name="act_window_id" ref="actions_view_trxmexico"/>
            <field name="domain">[]</field>
        </record>

        <record model="ir.actions.act_window.view" id="actions_view_trxmexico_kanban">
            <field eval="1" name="sequence"/>
            <field name="view_mode">kanban</field>
            <field name="view_id" ref="view_res_partner_contactos_kanban_trxmexico"/>
            <field name="act_window_id" ref="actions_view_trxmexico"/>
            <field name="domain">[]</field>
        </record>


        <!-- VISTA TREE PARA PRODUCTOS (PRODUCT.PRODUCT) -->
         <record id="view_product_tree_trxmexico" model="ir.ui.view">
            <field name="name">view.product.tree.trxmexico</field>
            <field name="model">product.product</field>
            <field name="inherit_id" ref="stock.view_stock_product_tree"/>
            <field name="arch" type="xml">
                <data>
                    <xpath expr="//field[@name='default_code']" position="attributes">
                        <attribute name="invisible">1</attribute>
                    </xpath>
                    <xpath expr="//field[@name='attribute_value_ids']" position="attributes">
                        <attribute name="invisible">1</attribute>
                    </xpath>
                    <xpath expr="//field[@name='lst_price']" position="attributes">
                        <attribute name="string">Costo USD</attribute>
                    </xpath>
                    <xpath expr="//field[@name='qty_available']" position="attributes">
                        <attribute name="invisible">1</attribute>
                    </xpath>
                    <xpath expr="//field[@name='uom_id']" position="attributes">
                        <attribute name="invisible">1</attribute>
                    </xpath>
                    <xpath expr="//field[@name='virtual_available']" position="attributes">
                        <attribute name="invisible">1</attribute>
                    </xpath>
                    <xpath expr="//field[@name='ean13']" position="attributes">
                        <attribute name="invisible">1</attribute>
                    </xpath>
                    <xpath expr="//field[@name='lst_price']" position="after">
                        <field name="price_sell_mxn" string="Costo MXN" />
                    </xpath> 
                </data>
            </field>
        </record>

        <!-- VISTA FORM PARA PRODUCTOS (PRODUCT.PRODUCT)) -->
        <record id="view_product_form_trxmexico" model="ir.ui.view">
            <field name="name">view.product.form.trxmexico</field>
            <field name="model">product.product</field>
            <field name="inherit_id" ref="product.product_template_only_form_view"/>
            <field name="arch" type="xml">
                <data>
                     <xpath expr="//label[@for='sale_ok']" position="attributes">
                        <attribute name="invisible">1</attribute>
                    </xpath>
                    <xpath expr="//field[@name='active']" position="attributes">
                        <attribute name="invisible">1</attribute>
                    </xpath>
                    <xpath expr="//field[@name='ean13']" position="attributes">
                        <attribute name="invisible">1</attribute>
                    </xpath>
                    <xpath expr="//field[@name='default_code']" position="attributes">
                        <attribute name="invisible">1</attribute>
                    </xpath>
                    <xpath expr="//field[@name='type']" position="attributes">
                        <attribute name="invisible">1</attribute>
                    </xpath>
                     <xpath expr="//field[@name='sale_ok']" position="attributes">
                        <attribute name="invisible">1</attribute>
                    </xpath>
                    <xpath expr="/form/sheet/notebook/page[2]" position="attributes">
                        <attribute name="invisible">1</attribute>
                    </xpath>
                    <xpath expr="/form/sheet/notebook/page[3]" position="attributes">
                        <attribute name="invisible">1</attribute>
                    </xpath>
                    <xpath expr="/form/sheet/notebook/page[4]" position="attributes">
                        <attribute name="invisible">1</attribute>
                    </xpath>
                    <xpath expr="/form/sheet/notebook/page[5]" position="attributes">
                        <attribute name="invisible">1</attribute>
                    </xpath>
                    <xpath expr="/form/sheet/notebook/page[6]" position="attributes">
                        <attribute name="invisible">1</attribute>
                    </xpath>
                    <xpath expr="//label[@for='name']" position="attributes">
                        <attribute name="string">Nombre del Producto</attribute>
                    </xpath>
                    <xpath expr="//field[@name='name']" position="after">
                        <field name="sku_product" placeholder ='SKU'/>                        
                    </xpath>
                    <xpath expr="//field[@name='description']" position="attributes">
                        <attribute name="placeholder">Descripción del Producto</attribute>
                    </xpath>
                    <xpath expr="//field[@name='list_price']" position="attributes">
                        <attribute name="string">Precio de Venta USD</attribute>
                    </xpath>
                    <xpath expr="//field[@name='list_price']" position="after">
                        <field name="price_sell_mxn"/>
                        <field name="check_visible" string='Descontinuar Producto'/>
                    </xpath>

                </data>
            </field>
        </record>
        
        <!-- VISTA KANBAM PARA CONTACTOS (RES_PARTNER) -->
        <record id="view_product_kanban_trxmexico" model="ir.ui.view">
            <field name="name">iew.product.kanban.trxmexico</field>
            <field name="model">product.product</field>
            <field name="inherit_id" ref="product.product_template_kanban_view"/>
            <!-- <field name="mode">primary</field>  -->
            <field name="arch" type="xml">
                <data>
                    <xpath expr="/kanban/templates/t/div/div/ul/li" position="replace">
                            <p>Precio de Venta USD (CON IVA): 
                            <t name="lst_price" modifiers="{}" t-esc="record.lst_price.value"/>
                            </p>
                            <p>Precio de Venta MXN (CON IVA): 
                            <t name="price_sell_mxn" modifiers="{}" t-esc="record.price_sell_mxn.value"/>
                            </p>
                    </xpath>
                    <xpath expr="//field[@name='lst_price']" position="after">
                        <field name="price_sell_mxn" string="Precio Venta MXN(CON IVA)"/>
                    </xpath>
                </data>
            </field>
        </record>

        <!-- Actions y Relación de RES_PARTNER  -->
        <record model="ir.actions.act_window" id="actions_view_product_trxmexico">
            <field name="name">Productos</field>
            <field name="res_model">product.product</field>
            <field name="view_type">form</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="domain">[('id','>',1),('check_visible','!=',True)]</field>        
        </record>

        <record model="ir.actions.act_window.view" id="actions_view_trxmexico_tree">
            <field eval="2" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_product_tree_trxmexico"/>
            <field name="act_window_id" ref="actions_view_product_trxmexico"/>
            <field name="domain">[]</field>

        </record>

        <record model="ir.actions.act_window.view" id="actions_view_trxmexico_form">
            <field eval="3" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_product_form_trxmexico"/>
            <field name="act_window_id" ref="actions_view_product_trxmexico"/>
            <field name="domain">[]</field>
        </record>

        <record model="ir.actions.act_window.view" id="actions_view_trxmexico_kanban">
            <field eval="1" name="sequence"/>
            <field name="view_mode">kanban</field>
            <field name="view_id" ref="view_product_kanban_trxmexico"/>
            <field name="act_window_id" ref="actions_view_product_trxmexico"/>
            <field name="domain">[]</field>
        </record>

        <!-- VISTA PARA PROUCTOS DESCONTINUADOS -->

        <record model="ir.actions.act_window" id="actions_view_product_desc_trxmexico">
            <field name="name">Productos Descontinuados</field>
            <field name="res_model">product.product</field>
            <field name="view_type">form</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="domain">[('id','>',1),('check_visible','=',True)]</field>        
        </record>

        <record model="ir.actions.act_window.view" id="actions_view_trxmexico_tree1">
            <field eval="2" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_product_tree_trxmexico"/>
            <field name="act_window_id" ref="actions_view_product_desc_trxmexico"/>
            <field name="domain">[]</field>

        </record>

        <record model="ir.actions.act_window.view" id="actions_view_trxmexico_form1">
            <field eval="3" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_product_form_trxmexico"/>
            <field name="act_window_id" ref="actions_view_product_desc_trxmexico"/>
            <field name="domain">[]</field>
        </record>

        <record model="ir.actions.act_window.view" id="actions_view_trxmexico_kanban1">
            <field eval="1" name="sequence"/>
            <field name="view_mode">kanban</field>
            <field name="view_id" ref="view_product_kanban_trxmexico"/>
            <field name="act_window_id" ref="actions_view_product_desc_trxmexico"/>
            <field name="domain">[]</field>
        </record>

        <!-- VISTA FORM PARA CAJA CHICA ACCOUNT_INVOICE -->
         <record model="ir.ui.view" id="view_trxmexico_cuentas_cotizaciones_tree">
            <field name="name">view.trxmexico.cuentas.cotizaciones.tree</field>
            <field name="model">account.invoice</field> 
            <field name="inherit_id" ref="account.invoice_tree"/>
            <field name="priority" eval="28"/>
            <field name="mode">primary</field> 
            <field name="arch" type="xml">
                <data>
                    <xpath expr="//field[@name='partner_id']" position="before">
                        <field name="referencia_cotizacion"/>
                        <field name="fecha_cotizacion"/>
                    </xpath>
                    <xpath expr="/tree/field[@name='origin']" position="attributes">
                        <attribute name="invisible">1</attribute> 
                    </xpath> 
                    <xpath expr="/tree/field[@name='date_due']" position="attributes">
                        <attribute name="invisible">1</attribute> 
                    </xpath> 
                    <xpath expr="/tree/field[@name='user_id']" position="attributes">
                        <attribute name="invisible">1</attribute> 
                    </xpath> 
                    <xpath expr="/tree/field[@name='company_id']" position="attributes">
                        <attribute name="invisible">1</attribute> 
                    </xpath>
                    <xpath expr="/tree/field[@name='date_invoice']" position="attributes">
                        <attribute name="invisible">1</attribute> 
                    </xpath>
                    <xpath expr="/tree/field[@name='residual']" position="attributes">
                        <attribute name="invisible">1</attribute> 
                    </xpath>
                    <xpath expr="/tree/field[@name='number']" position="attributes">
                        <attribute name="invisible">1</attribute> 
                    </xpath>
                    <xpath expr="/tree/field[@name='state']" position="attributes">
                        <attribute name="invisible">1</attribute> 
                    </xpath>
                    <xpath expr="/tree/field[@name='amount_untaxed']" position="attributes">
                        <attribute name="invisible">1</attribute> 
                    </xpath>
                    <xpath expr="/tree/field[@name='amount_total']" position="attributes">
                        <attribute name="invisible">1</attribute> 
                    </xpath>
                    <xpath expr="/tree/field[@name='amount_total']" position="after">
                        <field name='total_con_desc' widget='monetary' options="{'currency_field': 'currency_id'}"/> 
                    </xpath>
                    <xpath expr="/tree/field[@name='partner_id']" position="after">
                        <field name="name_vendedor" readonly='False'/>
                        <field name="empresa_partner" readonly='False'/>
                    </xpath>
                </data>
            </field>
        </record>

        <!-- VISTA FORM PARA CAJA CHICA ACCOUNT_INVOICE -->
        <record model="ir.ui.view" id="view_trxmexico_cuentas_cotizaciones_form">
            <field name="name">view.trxmexico.cuentas.cotizaciones.form</field>
            <field name="model">account.invoice</field>
            <field name="inherit_id" ref="account.invoice_form"/>
            <field name="priority" eval="28"/>
            <field name="mode">primary</field> 
            <field name="arch" type="xml">
                <data>
                    <xpath expr="/form/header" position="attributes">
                        <attribute name="invisible">1</attribute> 
                    </xpath>
                    <xpath expr="/form/header" position="before">
                        <header>
                            <button name='button_duplicate_register' string='Duplicar Cotización' type="object" class="oe_highlight"/>  
                            <button name='enviar_cotizacion_partner' string='Enviar Cotización' type="object"/>  
                        </header>
                    </xpath>
                    <xpath expr="/form/sheet/h1" position="attributes">
                        <attribute name="invisible">1</attribute> 
                    </xpath> 
                    <field name="payment_term" position="attributes">
                        <attribute name="invisible">1</attribute> 
                    </field> 
                    <xpath expr="/form/sheet/notebook/page[1]/field[@name='invoice_line']/tree/field[@name='name']" position="attributes">
                        <attribute name="required">False</attribute>
                    </xpath>
                    <xpath expr="/form/sheet/notebook/page[1]/field[@name='invoice_line']/tree/field[@name='account_id']" position="attributes">
                        <attribute name="invisible">1</attribute>
                    </xpath>
                    <xpath expr="/form/sheet/group/group[2]/field[@name='journal_id']" position="attributes">
                        <attribute name="invisible">1</attribute> 
                    </xpath>
                    <xpath expr="/form/sheet/group/group[2]/field[@name='account_id']" position="attributes">
                    <attribute name="invisible">1</attribute> 
                    </xpath>
                    <field name="fiscal_position" position="attributes">
                        <attribute name="invisible">1</attribute> 
                    </field> 
                    <xpath expr="/form/sheet/notebook/page[@string='Other Info']" position="attributes">
                        <attribute name="invisible">True</attribute> 
                    </xpath> 
                    <xpath expr="/form/sheet/notebook/page[@string='Payments']" position="attributes">
                        <attribute name="invisible">True</attribute> 
                    </xpath> 
                    <xpath expr="/form/div" position="attributes">
                        <attribute name="invisible">True</attribute> 
                    </xpath> 
                    <field name="date_invoice" position="before">
                        <field name="fecha_cotizacion"/>
                    </field>
                    <field name="date_invoice" position="attributes">
                        <attribute name="invisible">True</attribute> 
                    </field>
                    <field name="date_invoice" position="attributes">
                        <attribute name="string">Fecha de Cotización</attribute> 
                    </field>
                    <xpath expr="/form/sheet/notebook/page[1]" position="attributes">
                        <attribute name="string">Lineas de Captura</attribute> 
                    </xpath>
                    <xpath expr="//field[@name='fecha_cotizacion']" position="after">                    
                        <div class="oe_right" name="fechas">
                             <group>
                                <group class="oe_subtotal_footer oe_right">
                                    <button type="object" name="attachment_docs_account" class="oe_stat_button" icon="fa-files-o">
                                        <div class="data-original-title title" widget="statinfo">Versión Cot.</div>
                                    </button>
                                </group>
                            </group>
                        </div>
                    </xpath>
                    <xpath expr="/form/sheet/notebook/page[1]/field[@name='invoice_line']/tree/field[@name='name']" position="after">
                        <field name='modificar_precio' on_change='onchange_get_price_unit(product_id,quantity,price_unit,modificar_precio,context)'/>
                        <field name='description_p' invisible ='True'/>
                    </xpath>
                    <xpath expr="/form/sheet/notebook/page[1]/field[@name='invoice_line']/tree/field[@name='product_id']" position="attributes">
                        <attribute name="context">{'form_view_ref':'trxmexico.view_product_form_trxmexico', 'tree_view_ref':'trxmexico.view_product_tree_trxmexico','in_dolars':True}</attribute> 
                    </xpath>
                    <xpath expr="/form/sheet/notebook/page[1]/field[@name='invoice_line']/tree/field[@name='quantity']" position="attributes">
                        <attribute name="on_change">onchange_get_price_unit(product_id,quantity,price_unit,modificar_precio,context)</attribute>
                         <attribute name="context">{'in_dolars':True}</attribute>
                    </xpath>
                    <xpath expr="/form/sheet/notebook/page[1]/field[@name='invoice_line']/tree/field[@name='price_unit']" position="attributes">
                        <attribute name="string">Precio Unit.</attribute>
                        <attribute name="on_change">onchange_get_price_unit(product_id,quantity,price_unit,modificar_precio,context)</attribute>
                        <attribute name="context">{'in_dolars':True}</attribute>
                        <attribute name="options">{'currency_field': 'currency_id'}</attribute>
                        <attribute name="widget">monetary</attribute>
                    </xpath>
                    <xpath expr="/form/sheet/notebook/page[1]/field[@name='invoice_line']/tree/field[@name='price_subtotal']" position="attributes">
                        <attribute name="options">{'currency_field': 'currency_id'}</attribute>
                        <attribute name="widget">monetary</attribute>
                    </xpath>
                    <xpath expr="/form/sheet/notebook/page[1]/field[@name='invoice_line']/tree/field[@name='price_unit']" position="after">
                        <!-- <field name="price_sell_mxn"/> -->
                        <!-- Se agrego campo precio_pro Update M1 -->
                        <field name="precio_pro" invisible="True"/>
                        <field name="descuento" placeholder='%'/>

                    </xpath>
                    <xpath expr="/form/sheet/notebook/page[1]/field[@name='invoice_line']" position="attributes">
                        <attribute name="delete">1</attribute> 

                    </xpath>
                    <xpath expr="/form/div" position="attributes">
                        <attribute name="invisible">False</attribute> 
                    </xpath>

                    <xpath expr="/form/sheet/h1" position="before">
                        <group>
                            <h1>
                                <field name="referencia_cotizacion" readonly='True'/>
                            </h1>
                        </group>
                    </xpath>
                    <xpath expr="//field[@name='partner_id']" position="after">
                        <field name="empresa_partner" readonly='False'/>
			<field name="proyecto_name" readonly='False'/>
                        <field name="name_vendedor" readonly='True'/>
                        <field name="descuento_habilitar" required='True'/>
                        <field name="descuento" placeholder='%' attrs="{'invisible': [('descuento_habilitar', '!=', '1')]}"/>
                        <field name="check_envio" />
                        <field name="costo_envio" placeholder='$' attrs="{'invisible': [('check_envio', '=', False)]}" widget='monetary' options="{'currency_field': 'currency_id'}" on_change='1' string='Costo envío (SIN IVA)'/>
                    </xpath>
                    <xpath expr="/form" position="attributes">
                        <attribute name="string">Cotización</attribute> 
                    </xpath>
                     <xpath expr="/form/sheet" position="attributes">
                        <attribute name="string">Cotización</attribute> 
                    </xpath>
                    <xpath expr="//label[@for='comment']" position="before">
                        <group>
                         <field name="observaciones" placeholder='INGRESAR EN CASO DE TENER OBSERVACIONES '/>
                        </group>
                        <separator string="Condiciones Comerciales"/>
                        <group>
                            <field name="invoice_id" widget='many2many_checkboxes' on_change='1'/>
                        </group>
                        <group>
                            <field name="invoice_id_entrega" widget='many2many_checkboxes' on_change='1'/>
                        </group>
                        <group>
                            <field name="invoice_id_general" widget='many2many_checkboxes' on_change='1'/>
                        </group>
                    </xpath>
                    <xpath expr="/form/sheet/notebook/page[1]/group/field[@name='amount_untaxed']" position="attributes">
                        <attribute name="invisible">1</attribute> 
                    </xpath>
                    <xpath expr="/form/sheet/notebook/page[1]/group/field[@name='amount_total']" position="attributes">
                        <attribute name="invisible">1</attribute> 
                    </xpath>
                    <xpath expr="/form/sheet/notebook/page[1]/group/field[@name='amount_untaxed']" position="before">
                        <field name="des_subtotal" widget="monetary" readonly = 'True' attrs="{'invisible': [('descuento_habilitar', '=', '0')]}" options="{'currency_field': 'currency_id'}"/>
                    </xpath>
                    <!-- <xpath expr="/form/sheet/notebook/page[1]/group/field[@name='amount_total']" position="after">
                        <field name='amount_tax_mxn' widget="monetary" readonly = 'True' class="oe_subtotal_footer_separator" options="{'currency_field': 'currency_id'}"/>
                    </xpath> -->
                    <xpath expr="/form/sheet/notebook/page[1]/group/field[@name='amount_untaxed']" position="after">
                        <field name="subtotal_con_desc" widget="monetary" readonly = 'True' options="{'currency_field': 'currency_id'}" on_change='1'/>
                        <field name="amount_envio" widget="monetary" readonly = 'True' options="{'currency_field': 'currency_id'}"/>
                    </xpath>
                    <xpath expr="/form/sheet/notebook/page[1]/group/field[@name='amount_total']" position="after">
                        <field name="total_con_desc" widget="monetary" readonly = 'True' class="oe_subtotal_footer_separator" options="{'currency_field': 'currency_id'}" on_change='1'/>
                    </xpath>
                    <xpath expr="/form/sheet/notebook/page[1]/group/div/button[@name='button_reset_taxes']" position="replace">
                        <button name="button_reset_taxes_trx" states="draft,proforma2"
                            string="(update)" class="oe_link oe_edit_only"
                            type="object" help="Recompute taxes and total"/>
                    </xpath>

                </data>
            </field>
        </record>

        <record model="ir.actions.act_window" id="action_trxmexico_cuentas_cotizaciones">
            <field name="name">Cotizaciones TRXMéxico</field>
            <field name="res_model">account.invoice</field>
            <field name="context">{}</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('type_cotizacion','=',False)]</field>
            <field name="view_id" ref="view_trxmexico_cuentas_cotizaciones_tree"/>
        </record>

        <record model="ir.actions.act_window.view" id="action_trxmexico_cuentas_cotizaciones_tree">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_trxmexico_cuentas_cotizaciones_tree"/>
            <field name="act_window_id" ref="action_trxmexico_cuentas_cotizaciones"/>
        </record>

        <record model="ir.actions.act_window.view" id="action_trxmexico_cuentas_cotizaciones_form">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_trxmexico_cuentas_cotizaciones_form"/>
            <field name="act_window_id" ref="action_trxmexico_cuentas_cotizaciones"/>
        </record>

        <!-- Vista Form para Tipo de Cambio -->
        <record id="view_trx_change_type_form" model="ir.ui.view">
            <field name="name">Tipo de Cambio</field>
            <field name="model">trxmexico.change.monetary</field>
            <field name="arch" type="xml">
                <form string="Tipo de Cambio">
                    <separator string="Dolar hoy en México"/>
                    <group colspan='2' col='4'>
                        <field name="price_dolar"/>
                        <field name="fecha_cambio" readonly='True'/>
                        <field name="price_before" readonly='True'/>
                        <field name="currency_id" readonly='True'/> 
                    </group>
                    <footer>
                      <button name="button_change_money" string="Aceptar" class="oe_highlight" type="object" confirm="¿Desea realizar el tipo de cambio?" />
                    </footer>
              </form>
            </field>
           </record>

        <record id="view_trx_change_type_action" model="ir.actions.act_window">
            <field name="name">Tipo de Cambio</field>
            <field name="res_model">trxmexico.change.monetary</field>  
            <field name="type">ir.actions.act_window</field>  
            <field name="view_type">form</field>  
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_trx_change_type_form"/>  
            <field name="domain">[]</field>
            <field name="context">{}</field>
            <field name="target">new</field>
        </record>

        <!-- Vista Form Para control de usuarios -->
        <record model="ir.ui.view" id="view_res_users_trx_config_form">
            <field name="name">res.users.trx.config.form</field>
            <field name="model">res.users</field>
            <field name="inherit_id" ref="base.view_users_simple_form"/>
            <field name="arch" type="xml">
                <data>
                    <xpath expr="//sheet/div[1]" position="replace"/>
                    <xpath expr="//sheet/group" position="after">
                        <separator colspan="4" string="Grupos"/>
                        <field name="groups_id" string="Grupos de usuarios" 
                                widget="many2many_checkboxes"
                                domain="[('category_id','=','Trxusers')]" />
                        <group name="grp_sucursal">
                        </group>
                        <!-- <group name="grp_sucursal"
                                attrs="{'invisible': [('sucursal_invisible', '=', True)]}">
                        </group> -->
                    </xpath>
                    <xpath expr="//sheet/group/label" position="replace"/>
                    <xpath expr="//sheet/group/div" position="replace"/>
                    <xpath expr="//sheet/group/field[@name='phone']" position="attributes">
                        <attribute name="invisible">1</attribute>
                    </xpath>
                    <xpath expr="//sheet/group/field[@name='mobile']" position="attributes">
                        <attribute name="invisible">1</attribute>
                    </xpath>
                    <xpath expr="//sheet/group/field[@name='fax']" position="attributes">
                        <attribute name="invisible">1</attribute>
                    </xpath>
                </data>
            </field>
        </record>

        <!--Action para  res.users (INICIO) -->
        <record model="ir.actions.act_window" id="trx_res_users_action">
            <field name="name">Usuario</field>
            <field name="res_model">res.users</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('id','>',1)]</field>
        </record>

            <!-- IMPORTAR CLIENTES-->
           <record model="ir.ui.view" id="view_attachment_asignar_users_form">
            <field name="name">view.ir.attachment.asiganr.users.form</field>
            <field name="model">ir.attachment</field>
            <field name="inherit_id" ref="base.view_attachment_form"/>
            <field name="priority" eval="17"/>
            <field name="mode">primary</field>
            <field name="arch" type="xml">
              <form>
                <data>
                  <xpath expr="/form/sheet/group" position="after">
                    <footer>
                      <button name="asignar_partner" string="Importar Clientes" class="oe_highlight" type="object" />
                      <button name="asignar_products" string="Importar Productos" class="oe_highlight" type="object" />
                    </footer>
                  </xpath>
                </data>
              </form>
            </field>
          </record>

          <record id="action_importar_clientes_trx" model="ir.actions.act_window">
            <field name="name">Importar Clientes</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">ir.attachment</field>
            <field name="view_mode">form</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="view_attachment_asignar_users_form"/>
            <field name="context">{}</field>
            <field name="target">new</field>
          </record>


            <!-- ANEXO DE CONDICONES DE PAGO-->
           <record model="ir.ui.view" id="view_trxmexico_condiciones_pago_tree">
            <field name="name">view.trxmexico.condiciones.pago.tree</field>
            <field name="model">trxmexico.condiciones.pago</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
              <tree string="Condiciones de Pago">
                <field name="name"/>  
                <field name="details" /> 
              </tree>
            </field>
          </record>

          <record id="action_trxmexico_condiciones_pago" model="ir.actions.act_window">
            <field name="name">Condiciones de Pago</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">trxmexico.condiciones.pago</field>
            <field name="view_mode">tree,form</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="view_trxmexico_condiciones_pago_tree"/>
            <field name="context">{}</field>
          </record>


           <!-- ANEXO DE CONDICONES DE ENTREGA-->
           <record model="ir.ui.view" id="view_trxmexico_condiciones_entrega_tree">
            <field name="name">view.trxmexico.condiciones.entrega.tree</field>
            <field name="model">trxmexico.condiciones.entrega</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
              <tree string="Condiciones de Entrega">
                <field name="name"/>  
                <field name="details" /> 
              </tree>
            </field>
          </record>

          <record id="action_trxmexico_condiciones_entrega" model="ir.actions.act_window">
            <field name="name">Condiciones de Entrega</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">trxmexico.condiciones.entrega</field>
            <field name="view_mode">tree,form</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="view_trxmexico_condiciones_entrega_tree"/>
            <field name="context">{}</field>
          </record>

          
          <!-- ANEXO DE CONDICONES GENERALES TREE-->
           <record model="ir.ui.view" id="view_trxmexico_condiciones_generales_tree">
            <field name="name">view.trxmexico.condiciones.generales.tree</field>
            <field name="model">trxmexico.condiciones.generales</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Condiciones de Generales">
                    <field name="name"/>  
                    <field name="details" /> 
                </tree>
            </field>
          </record>

          <record id="action_trxmexico_condiciones_generales" model="ir.actions.act_window">
            <field name="name">Condiciones de Generales</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">trxmexico.condiciones.generales</field>
            <field name="view_mode">tree,form</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="view_trxmexico_condiciones_generales_tree"/>
            <field name="context">{}</field>
          </record>


                <!-- VISTA FORM PARA COTIZACIONES ACCOUNT_INVOICE -->
        <record model="ir.ui.view" id="view_trxmexico_cuentas_cotizaciones_mxn_form">
            <field name="name">view.trxmexico.cuentas.cotizaciones.mxn.form</field>
            <field name="model">account.invoice</field>
            <field name="inherit_id" ref="account.invoice_form"/>
            <field name="priority" eval="28"/>
            <field name="mode">primary</field> 
            <field name="arch" type="xml">
                <data>
                    <xpath expr="/form/header" position="attributes">
                        <attribute name="invisible">1</attribute> 
                    </xpath>
                    <xpath expr="/form/header" position="before">
                        <header>
                            <button name='button_reset_taxes_trx_save' string='Guardar Cotización' type="object"/>  
                            <button name='enviar_cotizacion_partner' string='Enviar Cotización' type="object"/>  
                        </header>
                    </xpath>
                    <xpath expr="/form/sheet/h1" position="attributes">
                        <attribute name="invisible">1</attribute> 
                    </xpath> 
                    <field name="payment_term" position="attributes">
                        <attribute name="invisible">1</attribute> 
                    </field> 
                    <xpath expr="/form/sheet/notebook/page[1]/field[@name='invoice_line']/tree/field[@name='name']" position="attributes">
                        <attribute name="required">False</attribute>
                    </xpath>
                    <xpath expr="/form/sheet/notebook/page[1]/field[@name='invoice_line']/tree/field[@name='account_id']" position="attributes">
                        <attribute name="invisible">1</attribute>
                    </xpath>
                    <xpath expr="/form/sheet/group/group[2]/field[@name='journal_id']" position="attributes">
                        <attribute name="invisible">1</attribute> 
                    </xpath>
                    <xpath expr="/form/sheet/group/group[2]/field[@name='account_id']" position="attributes">
                    <attribute name="invisible">1</attribute> 
                    </xpath>
                    <field name="fiscal_position" position="attributes">
                        <attribute name="invisible">1</attribute> 
                    </field> 
                    <xpath expr="/form/sheet/notebook/page[@string='Other Info']" position="attributes">
                        <attribute name="invisible">True</attribute> 
                    </xpath> 
                    <xpath expr="/form/sheet/notebook/page[@string='Payments']" position="attributes">
                        <attribute name="invisible">True</attribute> 
                    </xpath> 
                    <xpath expr="/form/div" position="attributes">
                        <attribute name="invisible">True</attribute> 
                    </xpath> 
                    <field name="date_invoice" position="before">
                        <field name="fecha_cotizacion"/>
                    </field>
                    <field name="date_invoice" position="attributes">
                        <attribute name="invisible">True</attribute> 
                    </field>
                    <field name="date_invoice" position="attributes">
                        <attribute name="string">Fecha de Cotización</attribute> 
                    </field>
                    <xpath expr="/form/sheet/notebook/page[1]" position="attributes">
                        <attribute name="string">Lineas de Captura</attribute> 
                    </xpath>
                    <xpath expr="//field[@name='fecha_cotizacion']" position="after">                    
                        <div class="oe_right" name="fechas">
                             <group>
                                <group class="oe_subtotal_footer oe_right">
                                    <button type="object" name="attachment_docs_account" class="oe_stat_button" icon="fa-files-o">
                                        <div class="data-original-title title" widget="statinfo">Versión Cot.</div>
                                    </button>
                                </group>
                            </group>
                        </div>
                    </xpath>
                    <xpath expr="/form/sheet/notebook/page[1]/field[@name='invoice_line']/tree/field[@name='name']" position="after">
                        <field name='modificar_precio' on_change='onchange_get_price_unit(product_id,quantity,price_unit,modificar_precio,context)'/>
                        <field name='description_p' invisible ='True'/>
                    </xpath>
                    <xpath expr="/form/sheet/notebook/page[1]/field[@name='invoice_line']/tree/field[@name='product_id']" position="attributes">
                        <attribute name="context">{'form_view_ref':'trxmexico.view_product_form_trxmexico', 'tree_view_ref':'trxmexico.view_product_tree_trxmexico'}</attribute> 
                    </xpath>
                    <xpath expr="/form/sheet/notebook/page[1]/field[@name='invoice_line']/tree/field[@name='quantity']" position="attributes">
                        <attribute name="on_change">onchange_get_price_unit(product_id,quantity,price_unit,modificar_precio,context)</attribute>
                    </xpath>
                    <xpath expr="/form/sheet/notebook/page[1]/field[@name='invoice_line']/tree/field[@name='price_unit']" position="attributes">
                        <attribute name="string">Precio Unit.</attribute>
                        <attribute name="on_change">onchange_get_price_unit(product_id,quantity,price_unit,modificar_precio,context)</attribute>
                        <attribute name="options">{'currency_field': 'currency_id'}</attribute>
                        <attribute name="widget">monetary</attribute>
                    </xpath>
                    <xpath expr="/form/sheet/notebook/page[1]/field[@name='invoice_line']/tree/field[@name='price_subtotal']" position="attributes">
                        <attribute name="options">{'currency_field': 'currency_id'}</attribute>
                        <attribute name="widget">monetary</attribute>                    
                    </xpath>
                    <xpath expr="/form/sheet/notebook/page[1]/field[@name='invoice_line']/tree/field[@name='price_unit']" position="after">
                        <!-- <field name="price_sell_mxn"/> -->
                        <!-- Se agrego campo precio_pro Update M1-->
                        <field name="precio_pro" invisible="True"/>
                        <field name="descuento" placeholder='%'/>

                    </xpath>
                    <xpath expr="/form/sheet/notebook/page[1]/field[@name='invoice_line']" position="attributes">
                        <attribute name="delete">1</attribute> 

                    </xpath>
                    <xpath expr="/form/div" position="attributes">
                        <attribute name="invisible">False</attribute> 
                    </xpath>

                    <xpath expr="/form/sheet/h1" position="before">
                        <group>
                            <h1>
                                <field name="referencia_cotizacion" readonly='True'/>
                            </h1>
                        </group>
                    </xpath>
                    <xpath expr="//field[@name='partner_id']" position="after">
                        <field name="empresa_partner" readonly='False'/>
                        <field name="name_vendedor" readonly='True'/>
                        <field name="descuento_habilitar" required='True'/>
                        <field name="descuento" placeholder='%' attrs="{'invisible': [('descuento_habilitar', '!=', '1')]}"/>
                        <field name="check_envio"/>
                        <field name="costo_envio" placeholder='$' attrs="{'invisible': [('check_envio', '=', False)]}" widget='monetary' options="{'currency_field': 'currency_id'}" on_change='1' string='Costo envío (SIN IVA)'/>
                    </xpath>
                    <xpath expr="/form" position="attributes">
                        <attribute name="string">Cotización</attribute> 
                    </xpath>
                     <xpath expr="/form/sheet" position="attributes">
                        <attribute name="string">Cotización</attribute> 
                    </xpath>
                    <xpath expr="//label[@for='comment']" position="before">
                        <group>
                         <field name="observaciones" placeholder='INGRESAR EN CASO DE TENER OBSERVACIONES '/>
                        </group>
                        <separator string="Condiciones Comerciales"/>
                        <group>
                            <field name="invoice_id" widget='many2many_checkboxes' on_change='1'/>
                        </group>
                        <group>
                            <field name="invoice_id_entrega" widget='many2many_checkboxes' on_change='1'/>
                        </group>
                        <group>
                            <field name="invoice_id_general" widget='many2many_checkboxes' on_change='1'/>
                        </group>
                    </xpath>
                    <xpath expr="/form/sheet/notebook/page[1]/group/field[@name='amount_untaxed']" position="attributes">
                        <attribute name="invisible">1</attribute> 
                    </xpath>
                    <xpath expr="/form/sheet/notebook/page[1]/group/field[@name='amount_total']" position="attributes">
                        <attribute name="invisible">1</attribute> 
                    </xpath>
                    <xpath expr="/form/sheet/notebook/page[1]/group/field[@name='amount_untaxed']" position="before">
                        <field name="des_subtotal" widget="monetary" readonly = 'True' attrs="{'invisible': [('descuento_habilitar', '=', '0')]}" options="{'currency_field': 'currency_id'}"/>
                    </xpath>
                    <!-- <xpath expr="/form/sheet/notebook/page[1]/group/field[@name='amount_total']" position="after">
                        <field name='amount_tax_mxn' widget="monetary" readonly = 'True' class="oe_subtotal_footer_separator" options="{'currency_field': 'currency_id'}"/>
                    </xpath> -->
                    <xpath expr="/form/sheet/notebook/page[1]/group/field[@name='amount_untaxed']" position="after">
                        <field name="subtotal_con_desc" widget="monetary" readonly = 'True' options="{'currency_field': 'currency_id'}" on_change='1'/>
                        <field name="amount_envio" widget="monetary" readonly = 'True' options="{'currency_field': 'currency_id'}"/>
                    </xpath>
                    <xpath expr="/form/sheet/notebook/page[1]/group/field[@name='amount_total']" position="after">
                        <field name="total_con_desc" widget="monetary" readonly = 'True' class="oe_subtotal_footer_separator" options="{'currency_field': 'currency_id'}" on_change='1'/>
                    </xpath>
                    <xpath expr="/form/sheet/notebook/page[1]/group/div/button[@name='button_reset_taxes']" position="replace">
                        <button name="button_reset_taxes_trx" states="draft,proforma2"
                            string="(update)" class="oe_link oe_edit_only"
                            type="object" help="Recompute taxes and total"/>
                    </xpath>

                </data>
            </field>
        </record>
                <!-- VISTA FORM PARA CAJA CHICA ACCOUNT_INVOICE -->
         <record model="ir.ui.view" id="view_trxmexico_cuentas_cotizaciones_mxn_tree">
            <field name="name">view.trxmexico.cuentas.cotizaciones.tree</field>
            <field name="model">account.invoice</field> 
            <field name="inherit_id" ref="view_trxmexico_cuentas_cotizaciones_tree"/>
            <field name="priority" eval="28"/>
            <field name="mode">primary</field> 
            <field name="arch" type="xml">
                <data>
                    
                </data>
            </field>
        </record>

        <record model="ir.actions.act_window" id="action_trxmexico_mxn_cotizaciones">
            <field name="name">Cotizaciones TRXMéxico</field>
            <field name="res_model">account.invoice</field>
            <field name="context">{'in_context':True}</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('type_cotizacion','=',True)]</field>
            <field name="view_id" ref="view_trxmexico_cuentas_cotizaciones_mxn_tree"/>
        </record>

        <record model="ir.actions.act_window.view" id="action_trxmexico_cuentas_mxn_cotizaciones_tree">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_trxmexico_cuentas_cotizaciones_mxn_tree"/>
            <field name="act_window_id" ref="action_trxmexico_mxn_cotizaciones"/>
        </record>

        <record model="ir.actions.act_window.view" id="action_trxmexico_cuentas_cotizaciones_mxn_form">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_trxmexico_cuentas_cotizaciones_mxn_form"/>
            <field name="act_window_id" ref="action_trxmexico_mxn_cotizaciones"/>
        </record>

        <record id="trx_smtp_action_action" model="ir.actions.act_window">
            <field name="name">Servidores SMTP</field>
            <field name="res_model">ir.mail_server</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="base.ir_mail_server_list" />
        </record>

      <!-- Menús agregados (INICIO)--> 
        
        <!-- Menús primer nivel (INICIO) -->
        <menuitem name="TRXMexico" id="main_trx_mexico"/>
<!--         <menuitem id="main_trx_mexico_menu" name="TRXMexico"/>
 -->        
        <!-- Menús segundo nivel (INICIO)-->
        <menuitem id="trx_mexico_menu_organizador" name="Organizador" parent="main_trx_mexico"/>

        <!-- Menús tercer nivel (INICIO)-->
        <menuitem id="trx_mexico_menu_productoss" name="Catálogo de Productos" parent="trx_mexico_menu_organizador" action='actions_view_product_trxmexico' sequence ='10'/>
        <menuitem id="trx_mexico_menu_productos_des" name="Productos Descontinuados" parent="trx_mexico_menu_organizador" action='actions_view_product_desc_trxmexico' sequence ='11'/>
        <menuitem id="trx_mexico_menu_cotizacion" name="Cotizacion USD" parent="trx_mexico_menu_organizador" action='action_trxmexico_cuentas_cotizaciones' sequence ='20'/>
        <menuitem id="trx_mexico_menu_cotizacion_mxn" name="Cotizacion MXN" parent="trx_mexico_menu_organizador" action='action_trxmexico_mxn_cotizaciones' sequence ='30'/>
        <menuitem id="trx_mexico_menu_contactos" name="Clientes" parent="trx_mexico_menu_organizador" action='actions_view_trxmexico' sequence ='40'/>
        <menuitem id="trx_mexico_menu_tipo_cambio" name="Tipo de Cambio" parent="trx_mexico_menu_organizador" action='view_trx_change_type_action' sequence ='50'/>
        <menuitem id="trx_mexico_menu_users" name="Usuarios" parent="trx_mexico_menu_organizador" action='trx_res_users_action' sequence ='60'/>
        <menuitem id="trx_mexico_menu_conditions_pago" name="Condiciones de Pago" parent="trx_mexico_menu_organizador" action='action_trxmexico_condiciones_pago' sequence ='70'/>
        <menuitem id="trx_mexico_menu_conditions_entrega" name="Condiciones de Entrega" parent="trx_mexico_menu_organizador" action='action_trxmexico_condiciones_entrega' sequence ='80'/>
        <menuitem id="trx_mexico_menu_conditions_generales" name="Condiciones de Generales" parent="trx_mexico_menu_organizador" action='action_trxmexico_condiciones_generales' sequence ='90'/>

        <menuitem id="trx_mexico_menu_masive_partner" name="Cargar Layout (Masivo)" parent="trx_mexico_menu_organizador" action='action_importar_clientes_trx' sequence ='100'/>

        <menuitem id="trx_mexico_menu_smtp" name="Servidores SMTP" parent="trx_mexico_menu_organizador" action='trx_smtp_action_action' sequence ='110'/>


    </data>
</openerp>





       
